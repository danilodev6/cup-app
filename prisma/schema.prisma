generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id        Int      @id @default(autoincrement())
  name      String   @unique
  password  String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt @default(now())
}

model Tournament {
  id        Int      @id @default(autoincrement())
  name      String   @unique
  location  String
  date      DateTime
  teamCount Int
  teams     Team[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt @default(now())
}

model Team {
  id            Int        @id @default(autoincrement())
  name          String     @unique
  logoUrl       String
  players       Player[]
  group         String?
  tournamentId  Int
  tournament    Tournament @relation(fields: [tournamentId], references: [id])

  // Relaciones para matches
  homeMatches   Match[]    @relation("HomeTeam")
  awayMatches   Match[]    @relation("AwayTeam")

  createdAt     DateTime   @default(now())
  updatedAt     DateTime   @updatedAt @default(now())
}

model Player {
  id        Int      @id @default(autoincrement())
  name      String
  photoUrl  String
  teamId    Int
  team      Team     @relation(fields: [teamId], references: [id])
  score     Int      @default(0)
  yellowCards Int      @default(0)
  redCards    Int      @default(0)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt @default(now())
}

model Match {
    id            Int      @id @default(autoincrement())
    date          DateTime
    stage         String
    homeTeamId    Int
    homeTeam      Team     @relation("HomeTeam", fields: [homeTeamId], references: [id])
    awayTeamId    Int
    awayTeam      Team     @relation("AwayTeam", fields: [awayTeamId], references: [id])
    homeScore     Int      @default(0)
    awayScore     Int      @default(0)
}
